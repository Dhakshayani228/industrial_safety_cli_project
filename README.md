# Industrial Safety CLI - Full Version (with AI Q&A)

This command-line project ingests a folder of industrial safety PDFs, extracts text (with optional OCR), 
supports keyword search, and provides semantic search + AI-powered Q&A using OpenAI embeddings + FAISS.

## Structure
```
industrial_safety_cli_project_full/
├─ data/                # original PDFs (already included)
│  └─ texts/            # extracted text files (generated by scripts/ingest.py)
├─ scripts/
│  ├─ ingest.py         # extract text from PDFs into data/texts/ (OCR optional)
│  ├─ search.py         # simple keyword search over extracted texts
│  └─ ask_ai.py         # build-index (OpenAI embeddings + FAISS) and ask (LLM chat)
├─ requirements.txt
├─ .env.example
└─ README.md
```

## Quick start (on your machine)
1. Create a Python virtual environment (recommended):
   ```bash
   python -m venv venv
   source venv/bin/activate   # macOS/Linux
   venv\\Scripts\\activate    # Windows (PowerShell)
   ```
2. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
   **Note:** `pdf2image` requires `poppler` to be installed on your system for OCR. 
   On Ubuntu: `sudo apt-get install poppler-utils`.
   On macOS (Homebrew): `brew install poppler`.

3. Copy your PDFs into the `data/` folder (already done in this package).

4. Extract text from PDFs:
   ```bash
   python scripts/ingest.py
   ```
   If some PDFs are scanned images, run OCR fallback:
   ```bash
   python scripts/ingest.py --ocr
   ```

5. Keyword search:
   ```bash
   python scripts/search.py "machine guarding" --topk 5
   ```

6. Build semantic index (this calls OpenAI Embeddings API):
   - Set your OpenAI API key as an environment variable (or create a `.env` file with `OPENAI_API_KEY=...`):
     ```bash
     export OPENAI_API_KEY="sk-..."
     ```
   - Build index:
     ```bash
     python scripts/ask_ai.py build-index
     ```

7. Ask a question (semantic retrieval + LLM chat):
   ```bash
   python scripts/ask_ai.py ask "What are common machine guarding recommendations?"
   ```

## Notes & tips
- The FAISS index and metadata are saved under `data/index_store/`.
- Embeddings usage will consume tokens on your OpenAI account; building the index might cost a few cents to a few dollars depending on document size.
- If you prefer a cheaper/faster embedding model, change `text-embedding-3-small` to another model in `scripts/ask_ai.py`.
- If you want, I can add a Dockerfile to containerize this project.